{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/Doantotnghiep/Doantotnghiep/EKwebsite/frontend/src/components/Logout.js\",\n  _s = $RefreshSig$();\nimport accountApi from 'apis/accountApi';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { setMessage } from 'redux/slices/message.slice';\nimport GlobalLoading from './UI/GlobalLoading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Logout() {\n  _s();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const {\n    isAuth\n  } = useSelector(state => state.userInfo);\n  useEffect(() => {\n    if (!isAuth) {\n      history.goBack();\n      return;\n    }\n    (async function () {\n      try {\n        const apiRes = await accountApi.postLogout();\n        if (apiRes.status === 200) {\n          dispatch(setMessage({\n            type: 'success',\n            message: 'Đăng xuất thành công'\n          }));\n          window.location.href = history.location.pathname;\n        }\n      } catch (error) {\n        dispatch(setMessage({\n          type: 'error',\n          message: 'Đăng xuất thất bại, thử lại'\n        }));\n        history.goBack();\n      }\n    })();\n    return () => {};\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: isAuth && /*#__PURE__*/_jsxDEV(GlobalLoading, {\n      title: \"\\u0110ang \\u0111ang xu\\u1EA5t ...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 23\n    }, this)\n  }, void 0, false);\n}\n_s(Logout, \"f1Nt+O0I14AL1DrbW+y+w9ZCsME=\", false, function () {\n  return [useHistory, useDispatch, useSelector];\n});\n_c = Logout;\nexport default Logout;\nvar _c;\n$RefreshReg$(_c, \"Logout\");","map":{"version":3,"names":["accountApi","React","useEffect","useDispatch","useSelector","useHistory","setMessage","GlobalLoading","Logout","history","dispatch","isAuth","state","userInfo","goBack","apiRes","postLogout","status","type","message","window","location","href","pathname","error"],"sources":["/Users/mac/Documents/Doantotnghiep/Doantotnghiep/EKwebsite/frontend/src/components/Logout.js"],"sourcesContent":["import accountApi from 'apis/accountApi';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { setMessage } from 'redux/slices/message.slice';\nimport GlobalLoading from './UI/GlobalLoading';\n\nfunction Logout() {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const { isAuth } = useSelector((state) => state.userInfo);\n\n  useEffect(() => {\n    if (!isAuth) {\n      history.goBack();\n      return;\n    }\n\n    (async function () {\n      try {\n        const apiRes = await accountApi.postLogout();\n        if (apiRes.status === 200) {\n          dispatch(\n            setMessage({ type: 'success', message: 'Đăng xuất thành công' }),\n          );\n          window.location.href = history.location.pathname;\n        }\n      } catch (error) {\n        dispatch(\n          setMessage({ type: 'error', message: 'Đăng xuất thất bại, thử lại' }),\n        );\n        history.goBack();\n      }\n    })();\n\n    return () => {};\n  }, []);\n\n  return <>{isAuth && <GlobalLoading title=\"Đang đang xuất ...\" />}</>;\n}\n\nexport default Logout;\n"],"mappings":";;AAAA,OAAOA,UAAU,MAAM,iBAAiB;AACxC,OAAOC,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,UAAU,QAAQ,kBAAkB;AAC7C,SAASC,UAAU,QAAQ,4BAA4B;AACvD,OAAOC,aAAa,MAAM,oBAAoB;AAAC;AAAA;AAE/C,SAASC,MAAM,GAAG;EAAA;EAChB,MAAMC,OAAO,GAAGJ,UAAU,EAAE;EAC5B,MAAMK,QAAQ,GAAGP,WAAW,EAAE;EAC9B,MAAM;IAAEQ;EAAO,CAAC,GAAGP,WAAW,CAAEQ,KAAK,IAAKA,KAAK,CAACC,QAAQ,CAAC;EAEzDX,SAAS,CAAC,MAAM;IACd,IAAI,CAACS,MAAM,EAAE;MACXF,OAAO,CAACK,MAAM,EAAE;MAChB;IACF;IAEA,CAAC,kBAAkB;MACjB,IAAI;QACF,MAAMC,MAAM,GAAG,MAAMf,UAAU,CAACgB,UAAU,EAAE;QAC5C,IAAID,MAAM,CAACE,MAAM,KAAK,GAAG,EAAE;UACzBP,QAAQ,CACNJ,UAAU,CAAC;YAAEY,IAAI,EAAE,SAAS;YAAEC,OAAO,EAAE;UAAuB,CAAC,CAAC,CACjE;UACDC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAGb,OAAO,CAACY,QAAQ,CAACE,QAAQ;QAClD;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdd,QAAQ,CACNJ,UAAU,CAAC;UAAEY,IAAI,EAAE,OAAO;UAAEC,OAAO,EAAE;QAA8B,CAAC,CAAC,CACtE;QACDV,OAAO,CAACK,MAAM,EAAE;MAClB;IACF,CAAC,GAAG;IAEJ,OAAO,MAAM,CAAC,CAAC;EACjB,CAAC,EAAE,EAAE,CAAC;EAEN,oBAAO;IAAA,UAAGH,MAAM,iBAAI,QAAC,aAAa;MAAC,KAAK,EAAC;IAAoB;MAAA;MAAA;MAAA;IAAA;EAAG,iBAAI;AACtE;AAAC,GAhCQH,MAAM;EAAA,QACGH,UAAU,EACTF,WAAW,EACTC,WAAW;AAAA;AAAA,KAHvBI,MAAM;AAkCf,eAAeA,MAAM;AAAC;AAAA"},"metadata":{},"sourceType":"module"}