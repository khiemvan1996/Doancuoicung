{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/Doantotnghiep/Doantotnghiep/dynonary-english/frontend/src/components/UI/SearchInputCustom/index.js\",\n  _s = $RefreshSig$();\nimport { Grow } from '@material-ui/core';\nimport InputBase from '@material-ui/core/InputBase';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport wordApi from 'apis/wordApi';\nimport { MAX } from 'constant';\nimport NAV_SEARCH_DATA from 'constant/nav-search-data';\nimport { debounce } from 'helper';\nimport PropTypes from 'prop-types';\nimport React, { useRef, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport WordDetailModal from '../WordDetailModal';\nimport useStyle from './style';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet timer = null;\nfunction SearchInputCustom(_ref) {\n  _s();\n  let {\n    placeholder,\n    showInput,\n    prefixIcon\n  } = _ref;\n  const classes = useStyle();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const searchBarRef = useRef(null);\n  const [resultList, setResultList] = useState([]);\n  const [wordDetails, setWordDetails] = useState(null);\n  const history = useHistory();\n  const handleCloseModal = () => {\n    setAnchorEl(null);\n  };\n  const handleOpenWordDetails = async (word, to) => {\n    setAnchorEl(null);\n    if (Boolean(to)) {\n      history.push(to);\n      return;\n    }\n    const apiRes = await wordApi.getWordDetails(word);\n    setWordDetails(apiRes === null || apiRes === void 0 ? void 0 : apiRes.data);\n  };\n  const handleSearch = e => {\n    timer = debounce(timer, async function () {\n      var _e$target, _apiRes$data, _navSearchList;\n      const word = (_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.value;\n      if (!Boolean(word)) {\n        return;\n      }\n      let navSearchList = NAV_SEARCH_DATA.filter(i => `${i.title} ${i.searchKey}`.indexOf(word.toLowerCase()) !== -1).map(i => ({\n        title: i.title,\n        to: i.to\n      })) || [];\n      const apiRes = await wordApi.getSearchWord(word, true);\n      if ((_apiRes$data = apiRes.data) !== null && _apiRes$data !== void 0 && _apiRes$data.packList) {\n        navSearchList = [...navSearchList, ...apiRes.data.packList.map(i => ({\n          title: i.word,\n          to: null\n        }))];\n      }\n      setResultList(((_navSearchList = navSearchList) === null || _navSearchList === void 0 ? void 0 : _navSearchList.slice(0, 20)) || []);\n      setAnchorEl(searchBarRef.current);\n    }, 350);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.nativeInput,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: searchBarRef,\n      className: `${classes.icon} flex-center ${showInput ? 'show-input' : 'cur-pointer'}`,\n      children: prefixIcon\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), showInput && /*#__PURE__*/_jsxDEV(Grow, {\n      in: true,\n      children: /*#__PURE__*/_jsxDEV(InputBase, {\n        onChange: handleSearch,\n        autoFocus: true,\n        placeholder: placeholder,\n        classes: {\n          root: classes.inputRoot,\n          input: classes.inputInput\n        },\n        inputProps: {\n          'aria-label': 'search',\n          maxLength: MAX.SEARCH_LEN\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Menu, {\n      classes: {\n        paper: classes.resMenu\n      },\n      keepMounted: true,\n      anchorEl: anchorEl,\n      getContentAnchorEl: null,\n      anchorOrigin: {\n        vertical: 'bottom',\n        horizontal: 'left'\n      },\n      open: Boolean(anchorEl),\n      onClose: handleCloseModal,\n      children: (resultList === null || resultList === void 0 ? void 0 : resultList.length) > 0 ? resultList.map((item, index) => /*#__PURE__*/_jsxDEV(MenuItem, {\n        onClick: () => handleOpenWordDetails(item.title, item.to),\n        children: item.title\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }, this)) : /*#__PURE__*/_jsxDEV(MenuItem, {\n        className: classes.resMenuItem,\n        onClick: handleCloseModal,\n        children: \"Kh\\xF4ng t\\xECm th\\u1EA5y k\\u1EBFt qu\\u1EA3 n\\xE0o\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), wordDetails && /*#__PURE__*/_jsxDEV(WordDetailModal, {\n      open: true,\n      loading: false,\n      ...wordDetails,\n      onClose: () => setWordDetails(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n_s(SearchInputCustom, \"Wwjm8QKIKXtWL+oBl+FoP2d0qTU=\", false, function () {\n  return [useStyle, useHistory];\n});\n_c = SearchInputCustom;\nSearchInputCustom.propTypes = {\n  placeholder: PropTypes.string,\n  prefixIcon: PropTypes.any,\n  showInput: PropTypes.bool\n};\nSearchInputCustom.defaultProps = {\n  placeholder: '',\n  prefixIcon: null,\n  showInput: false\n};\nexport default SearchInputCustom;\nvar _c;\n$RefreshReg$(_c, \"SearchInputCustom\");","map":{"version":3,"names":["Grow","InputBase","Menu","MenuItem","wordApi","MAX","NAV_SEARCH_DATA","debounce","PropTypes","React","useRef","useState","useHistory","WordDetailModal","useStyle","timer","SearchInputCustom","placeholder","showInput","prefixIcon","classes","anchorEl","setAnchorEl","searchBarRef","resultList","setResultList","wordDetails","setWordDetails","history","handleCloseModal","handleOpenWordDetails","word","to","Boolean","push","apiRes","getWordDetails","data","handleSearch","e","target","value","navSearchList","filter","i","title","searchKey","indexOf","toLowerCase","map","getSearchWord","packList","slice","current","nativeInput","icon","root","inputRoot","input","inputInput","maxLength","SEARCH_LEN","paper","resMenu","vertical","horizontal","length","item","index","resMenuItem","propTypes","string","any","bool","defaultProps"],"sources":["/Users/mac/Documents/Doantotnghiep/Doantotnghiep/dynonary-english/frontend/src/components/UI/SearchInputCustom/index.js"],"sourcesContent":["import { Grow } from '@material-ui/core';\nimport InputBase from '@material-ui/core/InputBase';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport wordApi from 'apis/wordApi';\nimport { MAX } from 'constant';\nimport NAV_SEARCH_DATA from 'constant/nav-search-data';\nimport { debounce } from 'helper';\nimport PropTypes from 'prop-types';\nimport React, { useRef, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport WordDetailModal from '../WordDetailModal';\nimport useStyle from './style';\nlet timer = null;\n\nfunction SearchInputCustom({ placeholder, showInput, prefixIcon }) {\n  const classes = useStyle();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const searchBarRef = useRef(null);\n  const [resultList, setResultList] = useState([]);\n  const [wordDetails, setWordDetails] = useState(null);\n  const history = useHistory();\n\n  const handleCloseModal = () => {\n    setAnchorEl(null);\n  };\n\n  const handleOpenWordDetails = async (word, to) => {\n    setAnchorEl(null);\n\n    if (Boolean(to)) {\n      history.push(to);\n      return;\n    }\n\n    const apiRes = await wordApi.getWordDetails(word);\n    setWordDetails(apiRes?.data);\n  };\n\n  const handleSearch = (e) => {\n    timer = debounce(\n      timer,\n      async function () {\n        const word = e.target?.value;\n        if (!Boolean(word)) {\n          return;\n        }\n        let navSearchList =\n          NAV_SEARCH_DATA.filter(\n            (i) =>\n              `${i.title} ${i.searchKey}`.indexOf(word.toLowerCase()) !== -1,\n          ).map((i) => ({ title: i.title, to: i.to })) || [];\n\n        const apiRes = await wordApi.getSearchWord(word, true);\n        if (apiRes.data?.packList) {\n          navSearchList = [\n            ...navSearchList,\n            ...apiRes.data.packList.map((i) => ({ title: i.word, to: null })),\n          ];\n        }\n\n        setResultList(navSearchList?.slice(0, 20) || []);\n        setAnchorEl(searchBarRef.current);\n      },\n      350,\n    );\n  };\n\n  return (\n    <div className={classes.nativeInput}>\n      <div\n        ref={searchBarRef}\n        className={`${classes.icon} flex-center ${\n          showInput ? 'show-input' : 'cur-pointer'\n        }`}>\n        {prefixIcon}\n      </div>\n      {showInput && (\n        <Grow in={true}>\n          <InputBase\n            onChange={handleSearch}\n            autoFocus\n            placeholder={placeholder}\n            classes={{\n              root: classes.inputRoot,\n              input: classes.inputInput,\n            }}\n            inputProps={{ 'aria-label': 'search', maxLength: MAX.SEARCH_LEN }}\n          />\n        </Grow>\n      )}\n\n      {/* result menu */}\n      <Menu\n        classes={{\n          paper: classes.resMenu,\n        }}\n        keepMounted\n        anchorEl={anchorEl}\n        getContentAnchorEl={null}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        open={Boolean(anchorEl)}\n        onClose={handleCloseModal}>\n        {resultList?.length > 0 ? (\n          resultList.map((item, index) => (\n            <MenuItem\n              key={index}\n              onClick={() => handleOpenWordDetails(item.title, item.to)}>\n              {item.title}\n            </MenuItem>\n          ))\n        ) : (\n          <MenuItem className={classes.resMenuItem} onClick={handleCloseModal}>\n            Không tìm thấy kết quả nào\n          </MenuItem>\n        )}\n      </Menu>\n\n      {/* word detail modal */}\n      {wordDetails && (\n        <WordDetailModal\n          open={true}\n          loading={false}\n          {...wordDetails}\n          onClose={() => setWordDetails(null)}\n        />\n      )}\n    </div>\n  );\n}\n\nSearchInputCustom.propTypes = {\n  placeholder: PropTypes.string,\n  prefixIcon: PropTypes.any,\n  showInput: PropTypes.bool,\n};\n\nSearchInputCustom.defaultProps = {\n  placeholder: '',\n  prefixIcon: null,\n  showInput: false,\n};\n\nexport default SearchInputCustom;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}